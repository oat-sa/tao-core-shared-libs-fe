CKEDITOR.dialog.add("interactionsourcedialog",function(a){function e(a,b,c){CKEDITOR.plugins.get("alertdialog")?a.openDialog("alertdialog",function(a){a.setValueOf("info","msg",b);if(c)a.once("hide",c)}):(alert(b),c&&c())}var d=CKEDITOR.document.getWindow().getViewPaneSize(),g=Math.min(d.width-70,800);return{title:a.lang.interactionsource.title,minWidth:600,minHeight:400,resizable:CKEDITOR.DIALOG_RESIZE_BOTH,onShow:function(){var f=a.interactionElement,b=this;if(f)try{var c="\x3cinteraction_"+f.getAttribute("data-serial")+
"\x3e";this.setValueOf("main","data",c)}catch(d){console.error("Error getting simplified interaction HTML:",d),e(a,"Error retrieving simplified interaction HTML: "+d.message),setTimeout(function(){b.hide()},0)}else e(a,"No interaction found or not currently editing an interaction."),setTimeout(function(){b.hide()},0)},onOk:function(){var d=this;if(void 0===this.getValueOf("main","data").replace(/\r/g,""))return!0;setTimeout(function(){var b=void 0;a.focus();try{b=d.getValueOf("main","data");if(!b)throw Error("No edited data available");
console.log("New data from dialog:",b);if(!a.interactionElement)throw Error("Interaction element not found.");d.hide();a.fire("pluginContentModified",{html:b,pluginName:"interactionsourcedialog"})}catch(c){console.error("Error applying changes:",c),e(a,"Error updating interaction: "+c.message)}});return!1},contents:[{id:"main",label:a.lang.interactionsource.title,elements:[{type:"textarea",id:"data",dir:"ltr",inputStyle:"cursor:auto;width:100%;min-width:"+g+"px;max-width:unset;height:"+d.height/1.5+
"px;tab-size:4;text-align:left;font-family:monospace;","class":"cke_source"}]}]}});